{% extends 'base.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="/css/style.css">
{% endblock %}

{% block body %}



{% if products is empty %}
    <p>Products not found</p>
{% else %}
    <div class="product-grid">
        {% for p in products %}
            <div class="product-row">

               
    {# Primera columna: imagen#}
    <div class="product-image-block">
        <div class="rank">#{{ loop.index }}</div>
        {% if p.image %}
            <img src="{{ p.image }}" alt="{{ p.title }}">
        {% else %}
            <div class="no-image">No image</div>
        {% endif %}
    </div>

    {# 2 columna: rating #}
    <div class="product-rating-block">
        <div class="rating-number">{{ p.rating_score }}</div>
        <div class="rating-stars">
            {% for i in 1..5 %}
                {% if i <= p.rating_stars %}
                    <span class="star filled">★</span>
                {% else %}
                    <span class="star">☆</span>
                {% endif %}
            {% endfor %}
        </div>
        <div class="rating-text">
            {% if p.rating_score is defined %}
                <span class="rating-label">{{ p.label }}</span>
            {% endif %}
        </div>
    </div>

    {# 3 columna: onformacion del producto #}
    <div class="product-info-block">
        <h3 class="product-title">{{ p.title }}</h3>
        <div class="product-brand">{{ p.brand }}</div>

        <div class="product-tags">
            {% if p.freeShipping %}
                <span class="tag">{{ p.price }}</span>
            {% endif %}
        </div>
        <div class="product-tags">
            {% if p.freeShipping %}
                <span class="tag">Envío gratis</span>
            {% endif %}
        </div>

        {# el boton  Mostrar más abajo de tags #}
       
        <label for="toggle-{{ loop.index }}" class="toggle-btn top-btn"> </label>
    </div>

    {# 4 columna: el boton de compra #}
    <div class="product-buy-block">
        <a href="{{ p.detail_url }}" target="_blank" class="amazon-btn">
            Comprar ahora › 
        </a>
        <div class="amazon-logo"></div>
    </div>
      <input type="checkbox" id="toggle-{{ loop.index }}" class="toggle-checkbox">
    {# El parte desplegable #}
    <div class="full-description">
        <div class="desc-content">
            {% if p.features is defined and p.features is not empty %}
                <ul class="features">
                    {% for f in p.features %}
                        <li>{{ f }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
            {% if p.description is defined %}
                <p>{{ p.description }}</p>
            {% endif %}
{# El segundo boton dentro #}
        <div class="bottom-amazon">
        <a href="{{ p.detail_url }}" target="_blank" class="amazon-btn">
            Comprar ahora › 
        </a>
        <div class="amazon-logo"></div>
        </div>

   </div>
        
    </div>

</div>
 {% endfor %}
 {% endif %}

{% endblock %}